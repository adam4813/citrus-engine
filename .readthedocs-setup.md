# ReadTheDocs Setup Guide for Citrus Engine

This guide explains how to connect the Citrus Engine repository to ReadTheDocs for automatic documentation publishing.

## What's Been Done

The repository is now fully configured for ReadTheDocs with:

✅ **Configuration Files:**
- `.readthedocs.yml` - ReadTheDocs build configuration
- `Doxyfile` - Doxygen configuration for API extraction
- `docs/conf.py` - Sphinx configuration
- `docs/requirements.txt` - Python dependencies

✅ **Documentation Structure:**
- Getting Started guides (installation, building, first project)
- User guides (ECS, rendering, assets, UI, tilemap)
- API reference (auto-generated from Doxygen)
- Advanced topics (optimization, platform-specific, extending)

✅ **Testing:**
- Documentation builds successfully with `sphinx-build`
- Only 5 warnings (expected Doxygen warnings for undocumented code)

## Connecting to ReadTheDocs

### Step 1: Sign Up / Log In to ReadTheDocs

1. Go to https://readthedocs.org/
2. Click "Sign Up" or "Log In"
3. Use your GitHub account to authenticate

### Step 2: Import the Project

1. Click on your username (top right) → "My Projects"
2. Click "Import a Project"
3. Click "Import Manually" or select from your GitHub repositories
4. Fill in the project details:
   - **Name**: `citrus-engine`
   - **Repository URL**: `https://github.com/adam4813/citrus-engine`
   - **Repository type**: Git
   - **Default branch**: `main`
5. Click "Next"

### Step 3: Configure Project Settings

ReadTheDocs will automatically detect the `.readthedocs.yml` file. No additional configuration needed!

The configuration includes:
- Python 3.11 environment
- Doxygen and Graphviz for API documentation
- Sphinx with ReadTheDocs theme
- PDF and EPUB output formats

### Step 4: Build Documentation

1. ReadTheDocs will automatically trigger a build
2. Wait for the build to complete (first build may take 5-10 minutes)
3. Check the build log if there are any errors

### Step 5: View Your Documentation

Once the build succeeds, your documentation will be available at:
- **Latest**: `https://citrus-engine.readthedocs.io/en/latest/`
- **Stable**: `https://citrus-engine.readthedocs.io/en/stable/`

### Step 6: Configure Webhook (Optional)

ReadTheDocs should automatically set up a webhook for your repository. To verify:

1. Go to your GitHub repository settings
2. Click "Webhooks"
3. You should see a webhook for `readthedocs.org`
4. If not, ReadTheDocs will create one automatically on the first build

## Enabling Documentation Badge

Add this badge to your README.md to show documentation status:

```markdown
[![Documentation Status](https://readthedocs.org/projects/citrus-engine/badge/?version=latest)](https://citrus-engine.readthedocs.io/en/latest/?badge=latest)
```

## Project Settings

### Recommended Settings in ReadTheDocs

1. **Versions**: 
   - Enable builds for `main` branch (latest)
   - Enable builds for tagged releases (stable)

2. **Build Settings**:
   - All configured in `.readthedocs.yml` (no changes needed)

3. **Advanced Settings**:
   - Default version: `latest`
   - Default branch: `main`
   - Privacy level: Public

## Troubleshooting

### Build Fails

1. Check the build log on ReadTheDocs
2. Verify `.readthedocs.yml` is in the repository root
3. Ensure `docs/conf.py` and `Doxyfile` exist
4. Check that Python dependencies in `docs/requirements.txt` are correct

### Doxygen Warnings

The current setup shows some Doxygen warnings for undocumented classes. This is expected and will be resolved as code is documented with Doxygen comments.

To reduce warnings, add Doxygen comments to public APIs:

```cpp
/**
 * @brief Brief description of the class.
 * 
 * Detailed description of what the class does.
 */
class MyClass {
public:
    /**
     * @brief Brief description of the method.
     * @param param1 Description of parameter
     * @return Description of return value
     */
    int MyMethod(int param1);
};
```

### Missing Classes in API Reference

If classes don't appear in the API reference:
1. Ensure they're in the `src/engine` directory
2. Check that they have public visibility
3. Add Doxygen comments to the class
4. Verify `EXTRACT_ALL = NO` in Doxyfile (only documented classes are extracted)

## Building Locally

To build documentation locally:

```bash
# Install dependencies
pip install -r docs/requirements.txt
sudo apt-get install doxygen graphviz  # or brew install on macOS

# Build HTML
cd docs
sphinx-build -b html . _build/html

# View in browser
open _build/html/index.html  # macOS
xdg-open _build/html/index.html  # Linux
start _build/html/index.html  # Windows
```

## Maintenance

### Adding New Documentation

1. Create new `.rst` files in appropriate directory:
   - `docs/getting-started/` - Setup and basics
   - `docs/guides/` - Feature guides
   - `docs/api/` - API reference
   - `docs/advanced/` - Advanced topics

2. Add to the appropriate `index.rst` toctree

3. Build locally to test: `sphinx-build -b html . _build/html`

4. Commit and push - ReadTheDocs will auto-build

### Updating API Documentation

1. Add/update Doxygen comments in source code
2. Commit and push
3. ReadTheDocs will automatically regenerate API docs

### Versioning

For releases:
1. Tag the release: `git tag v1.0.0`
2. Push tag: `git push origin v1.0.0`
3. ReadTheDocs will automatically build docs for the tag
4. Users can select the version in the documentation

## Support

- **ReadTheDocs Documentation**: https://docs.readthedocs.io/
- **Sphinx Documentation**: https://www.sphinx-doc.org/
- **Doxygen Documentation**: https://www.doxygen.nl/manual/

## Summary

Your documentation is ready to go! Just import the project on ReadTheDocs and it will automatically build and publish your beautiful documentation site.

The documentation includes:
- ✅ Professional ReadTheDocs theme
- ✅ Auto-generated API reference from code
- ✅ Comprehensive user guides
- ✅ Search functionality
- ✅ PDF/EPUB download options
- ✅ Version selection (latest/stable)
- ✅ Mobile-friendly design
